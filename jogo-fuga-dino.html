<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Fuga do Dino | GeraF√°cil</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      background: #222;
      color: #fff;
      font-family: Arial, sans-serif;
      text-align: center;
    }

    canvas {
      background: #87ceeb;
      display: block;
      margin: 0 auto;
      border: 3px solid #000;
    }

    .controls {
      margin: 15px;
    }

    button {
      padding: 15px 20px;
      margin: 5px;
      font-size: 18px;
      border: none;
      border-radius: 8px;
      background: #2e7d32;
      color: white;
    }

    button:active {
      background: #1b5e20;
    }
  </style>
</head>

<body>

<h1>ü¶ñ Fuga do Dinossauro</h1>
<p>Fuja do dinossauro e desvie dos obst√°culos!</p>

<canvas id="game" width="350" height="400"></canvas>

<div class="controls">
  <button onclick="moveLeft()">‚¨ÖÔ∏è</button>
  <button onclick="jump()">‚¨ÜÔ∏è Pular</button>
  <button onclick="moveRight()">‚û°Ô∏è</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// IMAGENS
const playerImg = new Image();
playerImg.src = "https://i.imgur.com/7yUVE0K.png"; // boneco
  // SONS
const jumpSound = new Audio("https://assets.mixkit.co/sfx/preview/mixkit-quick-jump-arcade-game-239.mp3");
const gameOverSound = new Audio("https://assets.mixkit.co/sfx/preview/mixkit-player-losing-or-failing-2042.mp3");

const dinoImg = new Image();
dinoImg.src = "https://i.imgur.com/6X12Y3F.png"; // dino

const obstacleImg = new Image();
obstacleImg.src = "https://i.imgur.com/JYUB0mG.png"; // obst√°culo

// PERSONAGENS
const player = { x: 50, y: 300, w: 35, h: 40, vy: 0, jump: false };
const dino = { x: 300, y: 300, w: 45, h: 40 };

let obstacles = [];
let gravity = 1;
let gameOver = false;
let score = 0;
let level = 1;
let speed = 3;

// RANKING (localStorage)
let bestScore = localStorage.getItem("bestScore") || 0;

// CONTROLES
function moveLeft() { player.x -= 15; }
function moveRight() { player.x += 15; }
function jump() {
  if (!player.jump) {
    player.vy = -15;
    player.jump = true;
  }
}

function createObstacle() {
  obstacles.push({
    x: canvas.width,
    y: 315,
    w: 30,
    h: 30
  });
}

function update() {
  if (gameOver) return;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // GRAVIDADE
  player.vy += gravity;
  player.y += player.vy;

  if (player.y >= 300) {
    player.y = 300;
    player.vy = 0;
    player.jump = false;
  }

  // DESENHAR PLAYER
  ctx.drawImage(playerImg, player.x, player.y, player.w, player.h);

  // DINO (perseguidor)
  dino.x -= speed * 0.6;
  ctx.drawImage(dinoImg, dino.x, dino.y, dino.w, dino.h);

  // OBST√ÅCULOS
  obstacles.forEach(o => {
    o.x -= speed;
    ctx.drawImage(obstacleImg, o.x, o.y, o.w, o.h);

    // COLIS√ÉO
    if (
      player.x < o.x + o.w &&
      player.x + player.w > o.x &&
      player.y < o.y + o.h &&
      player.y + player.h > o.y
    ) endGame();
  });

  // COLIS√ÉO COM DINO
  if (
    player.x < dino.x + dino.w &&
    player.x + player.w > dino.x &&
    player.y < dino.y + dino.h &&
    player.y + player.h > dino.y
  ) endGame();

  // PONTUA√á√ÉO
  score++;
  ctx.fillStyle = "#000";
  ctx.fillText("Pontos: " + score, 10, 20);
  ctx.fillText("Fase: " + level, 10, 40);
  ctx.fillText("Recorde: " + bestScore, 10, 60);

  // FASES
  if (score % 300 === 0) {
    level++;
    speed += 1;
  }

  requestAnimationFrame(update);
}

function endGame() {
  gameOver = true;
gameOverSound.play();
  if (score > bestScore) {
    bestScore = score;
    localStorage.setItem("bestScore", bestScore);
  }

  ctx.fillStyle = "red";
  ctx.font = "24px Arial";
  ctx.fillText("GAME OVER", 90, 200);
  ctx.fillText("Recarregue para jogar novamente", 30, 230);
}

setInterval(createObstacle, 1500);
update();
</script>
<script>
// CONTROLES TECLADO
document.addEventListener("keydown", function (e) {
  if (e.key === "ArrowLeft") moveLeft();
  if (e.key === "ArrowRight") moveRight();
  if (e.key === "ArrowUp" || e.key === " ") jump();
});
  </script>
